/*! (C) WebReflection Mit Style License */
define(function(){function z(){this.loaded=!0}function W(){this.error=!0}function X(){y.test(this.readyState)&&z.call(this)}function V(e,t,n){var r=0,s,o;return function(u){n.push(u),++r===2&&(function a(){s||(s=document.getElementById(t))&&(s.loaded||s.error)?(s.parentNode.removeChild(s),s=document.getElementById("_"+t),s&&(o=document.createElement("div"),o.innerHTML=n.join(E),s.parentNode.replaceChild(o,s))):setTimeout(a,1e3)}(),document[i]=e)}}function $(e,t){return t=j.call(t),t.length?t.charAt(0)==="<"?t:"<p>"+t+"</p>":""}function J(e){for(var t=[],n=[],r=[],i={5:function(e,n,r){return(n.length?t.push(l,n,r+E):t.push(r+E))&&l},10:function(e,t,r){return n.push(r.replace(M[t],"")+E)&&c},16:function(e,t,n){return r.push(j.call(n.charAt(0)+n.slice(1).replace(M[t],"")))&&p}},a=0;a<I.length;a++)e=e.replace(I[a],q[a]||i[a]);return e.replace(d,function(e){return e=t.shift(),(e===l?s+' class="'+t.shift()+'">'+t.shift():s+">"+e)+o}).replace(v,function(e){return s+">"+n.shift()+o}).replace(m,$).replace(g,function(){return"<"+u+J(r.shift())+"</"+u})}for(var e=0,t=0,n=typeof document!="undefined",r=n&&document.documentElement,i="write",s="<pre><code",o="</code></pre>",u="blockquote>",a="```",f="",l="\0",c="",h="",p="<blockquote/>",d=/\x00/g,v=/\x01/g,m=/\x02([^\x00]*?)\x02/g,g=/<blockquote\/>/g,y=/^loaded|complete$/,b=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?(\w+).*$/,w=/https?:\/\/gist\.github\.com\/[^\x00]+?\/(\d+)(\.js)?$/,E="\n",S="\\r\\n|\\r|\\n",x="(?:^|"+S+")",T="(?:$|"+S+")",N="(?="+S+"(?!\\1)|$)",C="([^\\x00]*?)",k="\\[(.*?)\\]\\((.+?)(?: (&(?:quot|apos);)?(.+?)(\\3))?\\)",L="(.+?)"+T,A="g",O=A+"m",M={"	":/^\t/gm,"    ":/^    /gm,"&gt; ":/^&gt; /gm},_=/^#+$/,D=/^\s+|\s+$/g,P=/^\d/,H=/  +/g,B=new RegExp("(?:^"+S+")",O),j="".trim||function(){return this.replace(D,"")},F=["&(?!#?[a-z0-9]+;)",A,"<",A,">",A,'"',A,"'",A,x+a+"([a-zA-Z]*)(?:"+S+")"+C+"(?:"+S+")"+a+T,A,"^"+L+"=+"+T,O,"^"+L+"-+"+T,O,"^(?:\\* \\* |- - |\\*\\*|--)[-*][-* ]*"+T,O,x+"( {0,3})(\\* |\\+ |- |\\d+. )"+C+"(?="+S+"(?!\\1  )|$)",A,x+"(\\t| {4})"+C+N,A,"(`{1,2})([^\\r\\n]+?)\\1",O,"^(#{1,6})\\s+"+L,O,"  +"+E,A,"([_*]{1,2})([^\\2]+?)(\\1)",A,"!?"+k,O,x+"(&gt; )"+C+N,A,x+"(?!<)([^\\x00]*?)(?="+T+"{2,})",A],I=[],q=["&amp;","&lt;","&gt;","&quot;","&apos;",null,"<h1>$1</h1>","<h2>$1</h2>","<hr/>",function(e,t,n,r,i,s){return R="<li>"+J(r.replace(H,"")).replace(B,"<br/>")+"</li>",i===0?(f=P.test(n)?"<ol>":"<ul>",R=f+R):s.length-(i+e.length)<2&&(R+=f.replace("<","</")),R},null,"<code>$2</code>",function(e,t,n,r){return"<h"+(r=t.length)+">"+n.replace(_,"")+"</h"+r+">"},"<br/>",function(e,t,n,r){return"<"+(r=t.length==2?"strong>":"em>")+n+"</"+r},function(e,s,o,u,a){if(e.charAt(0)==="!")if(b.test(o))e='<iframe style="max-width:560px;max-height:315px;" src="'+o.replace(b,"http://www.youtube.com/embed/$1")+'" frameborder="0" allowfullscreen>'+s+"</iframe>";else if(w.test(o))if(n){var f="tinydown"+t++,l=r.insertBefore(document.createElement("script"),r.lastChild);l.type="text/javascript",l.id=f,l.onload=z,l.onerror=W,l.onreadystatechange=X,l.src=o.replace(RegExp.$1+RegExp.$2,RegExp.$1+".js"),e='<br id="_'+f+'"/>',document[i]=V(document[i],f,[])}else e='<script src="'+o+'"><!-- '+s+" --></script>";else e='<img src="'+o+'" alt="'+s+'" title="'+a+'"/>';else e='<a href="'+o+'" title="'+a+'">'+s+"</a>";return e},null,h+"$1"+h],R,U=0;U<F.length;I.push(new RegExp(F[U++],F[U++])));return J});